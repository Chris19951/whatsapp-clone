{"ast":null,"code":"import { db, auth } from \"../firebase\";\nimport { ref, set, push, increment, update } from \"firebase/database\"; //setFunction for userData\n\nexport function writeUserData(name, email) {\n  const userId = auth.currentUser.uid;\n  set(ref(db, 'Users/' + userId), {\n    user_id: userId,\n    user_chats: \"\",\n    user_name: name,\n    user_picture: \"https://firebasestorage.googleapis.com/v0/b/premade24-f8d8e.appspot.com/o/Unbenannt.PNG?alt=media&token=7a1510d3-531b-48f4-9e0c-df583cb2e65c\",\n    user_status: \"online\"\n  });\n} //setFunction for my last message information\n\nexport function setMyLastMessage(message, id) {\n  const userId = auth.currentUser.uid;\n  set(ref(db, 'Users/' + id + '/user_chats/' + userId), {\n    lastMessageContent: 'You: ' + message,\n    timeLastMessage: -Date.now(),\n    messageRead: 0\n  });\n} //setFunction for opponent last message information\n\nexport function setThereLastMessage(message, id) {\n  const userId = auth.currentUser.uid;\n  set(ref(db, 'Users/' + userId + '/user_chats/' + id), {\n    lastMessageContent: message,\n    timeLastMessage: -Date.now(),\n    messageRead: increment(1)\n  });\n} //push the message into the db\n\nexport function pushMessage(content, id) {\n  const userId = auth.currentUser.uid;\n  const d = new Date();\n  var minutes = d.getMinutes();\n  var hours = d.getHours();\n\n  if (d.getMinutes() < 10) {\n    minutes = \"0\" + d.getMinutes();\n  }\n\n  if (d.getHours() < 10) {\n    hours = \"0\" + d.getHours();\n  }\n\n  const date = hours + \":\" + minutes;\n  push(ref(db, 'chats/' + userId + id), {\n    content: content,\n    date: date,\n    id: userId\n  });\n} //push the message into the opponent db\n\nexport function pushMessageOther(content, id) {\n  const userId = auth.currentUser.uid;\n  const d = new Date();\n  var minutes = d.getMinutes();\n  var hours = d.getHours();\n\n  if (d.getMinutes() < 10) {\n    minutes = \"0\" + d.getMinutes();\n  }\n\n  if (d.getHours() < 10) {\n    hours = \"0\" + d.getHours();\n  }\n\n  const date = hours + \":\" + minutes;\n  push(ref(db, 'chats/' + id + userId), {\n    content: content,\n    date: date,\n    id: userId\n  });\n} //reset the unread message counter to zero\n\nexport function resetCounter(id) {\n  const userId = auth.currentUser.uid;\n  update(ref(db, 'Users/' + id + '/user_chats/' + userId), {\n    messageRead: 0\n  });\n}","map":{"version":3,"names":["db","auth","ref","set","push","increment","update","writeUserData","name","email","userId","currentUser","uid","user_id","user_chats","user_name","user_picture","user_status","setMyLastMessage","message","id","lastMessageContent","timeLastMessage","Date","now","messageRead","setThereLastMessage","pushMessage","content","d","minutes","getMinutes","hours","getHours","date","pushMessageOther","resetCounter"],"sources":["C:/Users/Christian/whatsappclone/src/contexts/Database.js"],"sourcesContent":["import { db, auth } from \"../firebase\";\r\nimport {ref, set,push,increment,update} from \"firebase/database\";\r\n\r\n//setFunction for userData\r\nexport  function writeUserData(name, email) {\r\n    const userId = auth.currentUser.uid\r\n     set(ref(db, 'Users/' + userId ), {\r\n        user_id: userId,\r\n        user_chats:\"\",\r\n        user_name: name,\r\n        user_picture: \"https://firebasestorage.googleapis.com/v0/b/premade24-f8d8e.appspot.com/o/Unbenannt.PNG?alt=media&token=7a1510d3-531b-48f4-9e0c-df583cb2e65c\",\r\n        user_status: \"online\",\r\n     });\r\n  }\r\n//setFunction for my last message information\r\nexport  function setMyLastMessage(message,id) {\r\n   const userId = auth.currentUser.uid\r\n   set(ref(db, 'Users/' + id + '/user_chats/' +userId   ), {\r\n     lastMessageContent:'You: '+message,\r\n     timeLastMessage:-Date.now(),\r\n     messageRead:0,\r\n     });\r\n }\r\n //setFunction for opponent last message information\r\n export  function setThereLastMessage(message,id) {\r\n   const userId = auth.currentUser.uid\r\n   set(ref(db, 'Users/' + userId + '/user_chats/' +id   ), {\r\n     lastMessageContent:message,\r\n     timeLastMessage:-Date.now(),\r\n     messageRead:increment(1),\r\n     });\r\n }\r\n //push the message into the db\r\n export  function pushMessage(content, id) {\r\n   const userId = auth.currentUser.uid\r\n   const d = new Date();\r\n   var minutes = d.getMinutes()\r\n   var hours = d.getHours()\r\n   if(d.getMinutes()<10){\r\n     minutes = \"0\"+d.getMinutes()\r\n   }\r\n   if(d.getHours()<10){\r\n     hours = \"0\"+d.getHours()\r\n   }\r\n   const date = hours+\":\"+minutes\r\n   push(ref(db, 'chats/' + userId + id ), {\r\n       content:content,\r\n       date:date,\r\n       id:userId,\r\n     });\r\n }\r\n//push the message into the opponent db\r\n export  function pushMessageOther(content, id) {\r\n   const userId = auth.currentUser.uid\r\n   const d = new Date();\r\n   var minutes = d.getMinutes()\r\n   var hours = d.getHours()\r\n   if(d.getMinutes()<10){\r\n     minutes = \"0\"+d.getMinutes()\r\n   }\r\n   if(d.getHours()<10){\r\n     hours = \"0\"+d.getHours()\r\n   }\r\n   const date = hours+\":\"+minutes\r\n   push(ref(db, 'chats/' + id + userId   ), {\r\n       content:content,\r\n       date:date,\r\n       id:userId,\r\n     });\r\n }\r\n //reset the unread message counter to zero\r\n export  function resetCounter(id) {\r\n   const userId = auth.currentUser.uid\r\n      update(ref(db, 'Users/' + id +'/user_chats/' +userId ), {\r\n         messageRead:0,\r\n      });\r\n }"],"mappings":"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"},"metadata":{},"sourceType":"module"}